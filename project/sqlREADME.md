# 1차(2024-03-22 ~ 2024-03-24)
## 변경사항
- DDL 포워드 엔지니어링 및 오류 수정
- 커뮤니티 관련 테이블 샘플 데이터 생성
- 커뮤니티 CRUD 관련 SQL 쿼리 작성

## 까다로웠던 점
- 게시글 리스트,상세조회를 표시하기 위해 여러 테이블이 참조되고 outer join이 여러번 들어가게 되면서 샘플 데이터를 넣으면 넣을수록 배로 늘어나게 되는 문제가 발생했다. 각각 따로 쿼리를 실행하는 방법도 있지만 group_concat함수를 사용하여 하나의 String으로 합쳐 조회하여 처리하였다.  


# 2차(2024-03-25)
## 피드백 및 변경사항
- Mybatis에서 <ResultMap/> 태그를 사용하면 중복 컬럼이 생겨도 ID를 기준으로 하나의 객체로 저장하기 때문에 group concat 함수를 넣을 필요가 없다.
- 일반게시판에서 댓글과 답글의 합산을 표기하기 위해 select해야 하는 상황에서 단순 '+' 연산자만으로도 구할 수 있다.
- 쓸모없는 group by 기준 컬럼 제거


# 3차(2024-03-26)
## 피드백 및 변경사항
- 상세 조회 order by 추가
  - 서브쿼리로 select하려 했지만 성능적으로 권장되지 않는 방식이고 값을 가져왔을 때 메인 컬럼과 일치하지 않는 값이 나오기 때문에 쿼리가 복잡해질 것 같다고 생각했다.
  - 따라서 댓글 작성일 -> 답글 작성일 순으로 정렬
  - 나머지 값은 단일 값이거나 collection 타입이고 중복 컬럼이기 때문에 정렬과 무관하다고 본다. 
  
- 후기 게시판 order by 누락된 부분 추가
- group by 재학습 후 쓸모없는 기준 컬럼 추가 제거
  - group by는 중복 컬럼에 대해 그룹으로 묶어 테이블로 만들어준다.
  - board_like와 board_file을 모두 조인할 경우 board_no 기준 하나로는 그룹별로 묶을 수 없기 때문에 추가적으로 uuid_file_name 기준을 하나 더 지정해주어야 한다.
- 게시글/댓글/답글 등의 삭제는 바로 삭제하지 않고 상태 데이터를 변경한 후 일정 기간 이후 DB에서 일괄 삭제하는 방식이므로 state를 update하는 쿼리와 state 상태에 따라 삭제하는 쿼리를 추가함
- 테스트 확인 작업 마무리되어서 기존 샘플데이터 값을 프로퍼티 플레이스홀더 방식으로 바꿈(${필드명})

# 4차(2024-03-28)
## 피드백 및 변경사항
생각을 잘못했다.. 게시글 상세 조회 시 댓글과 답글은 다른 곳에서도 사용할 수 있는 테이블이기 때문에 댓글과 답글 vo를 따로 만들고 객체로 넣어주고 쿼리 자체도 분리하는 것이 좋다..

또 나중에 AJAX를 사용하여 백엔드와 프론트엔드를 분리하게 되면 오히려 하나의 쿼리로 모든 값을 가져오는 것이 불가능하다.


팀장님과의 상의를 통해 지금 당장 분리하는 것보다 우선 이미 테스트가 끝난 2차 상세 조회 쿼리를 사용하여 구현을 빨리하는 것을 목적으로 하고 프로젝트가 끝난 후 또는 구현이 빨리 끝났다면 프론트랑 백엔드 분리하면서 쿼리도 같이 분리하는 방향으로 정함.


